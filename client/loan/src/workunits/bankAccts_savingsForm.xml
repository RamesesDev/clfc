<workunit>
    <invoker type="loan:savings" caption="Adding Savings Account" alignment="center" target="popup"/> <!--action="init"/>-->
    
    <invoker type="formActions" caption="Add" mnemonic="a" action="add" />
    <invoker type="formActions" caption="Cancel" mnemonic="c" action="_close" immediate="true"/>
    <code lang="groovy">
        <![CDATA[
        import com.rameses.rcp.annotations.*;
        import com.rameses.rcp.common.*;
        import com.rameses.osiris2.client.*;
        
        public class SavingsFormController{
            @Service('LoanApplicationService')
            def svc;
            
            @Script('BankAccountsSavingsInfoDef')
            def savingsInfoDef;
        
            def entity=[:];

            def info;
            def selectHandler;

            def typesofAccounList=[ "REGULAR SAVINGS", "INSTANT ACCESS SAVINGS", "NOTICE ACCOUNTS", "CASH ISAS"];
            def statusList=[ "ACTIVE", "INACTIVE" ];

            def add(){
                if( selectHandler ) selectHandler( entity );
                return "_close";
            }
            
            /*def entity=[:];
            def savingsInfoControls;
            def mode="read";
            def selectHandler;
            
            void init(){
                if( !entity.savings ) entity.savings = savingsInfoDef.createModel();
                savingsInfoControls = savingsInfoDef.getFormFields( entity.savings, 'entity.savings' );
            }
            
            def add(){
                if( selectHandler ) selectHandler( entity.savings );
                return "_close";
            }*/
        }
        ]]>
    </code>
    <pages>
        <page template="loan.bankAccnts.SavingsForm_1"/>
    </pages>
</workunit>