<workunit>
    <invokers>        
        <invoker type="collection:shortagePayment" caption="Shortage Payment Form" target="popup"/>         
        
        <invoker type="formActions" action="Ok"     caption="Ok and continue" mnemonic="o" tooltip="Ok and Continue"/>
        <invoker type="formActions" action="_close" caption="Cancel" mnemonic="c" tooltip="Cancel" immediate="true"/>
        
    </invokers>
    <code> 
        <![CDATA[
        import com.rameses.rcp.annotations.*;
        import com.rameses.rcp.common.*;
        import com.rameses.osiris2.client.*;
        
        class LoanRemittanceShortagePaymentController{
            @Service("LoanRemittanceService")
            def svc;
            
            @Service("LoanCollectionSheetService")
            def colSheetSvc;

            @Service( "LoanApplicationSearchService" )
            def searchSvc;
            
            def sSelectHandler;
            def shortHandler={o->
                o.routecode=entity.code;
                o.collector=entity.collector;
                o.routedescription=entity.description;
                //binding.refresh("entity.routecode");
            };
            
            def entity = [ date: OsirisContext.env.LOCALE_TIME
            
                          ];
            
            def Ok(){
                return "_close";
            }
        }    
        ]]>
    </code>
    <pages>
        <page template="loantreasury.remittance.field.LoanRemittance_ShortageOverPaymentPage"/>
    </pages>    
</workunit>