<html>
	<head>
		<script type="text/javascript">
			if( !window.console ) window.console = { log: function(msg){  }};
		</script>
		<script src="js/jquery.js"></script>

		<script src="js/rameses-lib.js"></script>

		<!--
		<script src="services/clfc/StudentService.js"></script>
		-->

		<style>
			body, table { font: 10pt/145% 'aria', 'verdana'; }
		
			table { border: solid 1px gray; }
			table th { text-align: left; }
			table tr.even td { 
				background: #ddd; 
				border-top: solid 1px #ddd; border-bottom: solid 1px #ddd; 
			}
			table tr.odd td  { 
				background: #fff; 
				border-top: solid 1px #fff; border-bottom: solid 1px #fff; 
			}
			table tr.selected td { background: navy; color: #fff; }
			table tr.selected td * { color: #fff; }
			
			table tr.selected td.selected,
			table tr.selected td.selected * { 
				background: yellow; color: #000; 
			}
			
		</style>
		<script>
			$put( "profile",
				new function() {
				
					this.entry = {};
					this.selections = [];
					
					this.addRecord = function() {
						studentList.push( this.entry );
						this.entry = {};
						this.model.refresh( true );
					};
				
					this.username = "Jayrome";

	
					
					
					this.selectItem = function(id, mode) {
						if(mode==true) {
							this.selections.push(id);
						}
						else {
							
						}
					}						

					this.items = [
						{id: '101', name: "Rey"},
						{id: '102', name: "Jen"}
					];
					
					this.selection = "no item";

					this.fire = function() {
						alert(this.selection);
					}


					var studentList = [
						{id: '001', firstname:"elmo", lastname:"nazareno", checked: true},
						{id: '002', firstname:"jess", lastname:"zamora", checked: true},
						{id: '003', firstname:"worgie", lastname:"flores"},
						{id: '004', firstname:"michael", lastname:"ramos"},
						{id: '005', firstname:"johana", lastname:"cardona"},
						{id: '006', firstname:"chariss", lastname:"villarosa", checked: true},
						{id: '007', firstname:"rojean", lastname:"vergara"},
						{id: '008', firstname:"robert", lastname:"yap"},
						{id: '009', firstname:"james", lastname:"yap", checked: true},
						{id: '010', firstname:"loren", lastname:"pedrito"},
					];

					/**
					 * after the model is realized
					 * the method that you can call are:
					 *   1. refresh( <optional boolean parameter> )
					 *      - the boolean parameter if true, the table fetches the list
					 *   2. load
					 *      - reloads the table, resets the start row to 0 (zero)
					 *   3. moveFirst, moveNext, movePrev, getSelectedItem, getSelectedItems
					 */
					
					this.model = {
						rows: 8,
						fetchList: function( p ) {
							return studentList.slice(p._start, p._start + p._limit);
						}
					};

					this.next = function() { this.model.moveNext(); };
					this.back = function() { this.model.movePrev(); };
					
					this.showSelected = function() {
						alert( this.model.getSelectedItem().firstname );
					};
					
					this.showSelectedList = function() {
						var names = [];
						$( this.model.getSelectedItems() ).each(function(i,e){ names.push( e.firstname); });
						alert( names.join(', ') );
					}

				}
			);

		</script>

	</head>
	<body>
		
		<select context="profile" items="items" itemKey="name" itemLabel="name" allowNull="true" emptyText="Select name" name="selection"></select>
		<br/>
		<input type="button" context="profile" name="fire" value="Fire"/>
		<br/>
	
	
		<label context="profile">
			Welcome <b>${username}</b>
		</label>
		<table context="profile" model="model" varName="item" varStatus="stat" cellpadding="3" 
		       cellspacing="0" width="400" >
			<thead>
				<th>&nbsp;</th>
				<th style="text-align: center">Id</th>
				<th>First Name</th>
				<th>Last Name</th>
				<th>&nbsp;</th>
			</thead>
			<tbody>
				<tr class="${stat.index%2==0? 'even' : 'odd'}">
					<td width="30">
						<input type="checkbox" />
					</td>
					<td width="50" align="center">
						<a href="view.php?id=${item.id}">${item.id}</a>
					</td>
					<td name="item.firstname"></td>
					<td name="item.lastname"></td>
					<td><input type="checkbox" value="test" onchange="$ctx('test').selectItem('#{row.id}', this.checked);"/></td>
				</tr>
			</tbody>
		</table>
		
		<br/>
		<input type="button" context="profile" name="back" value="Back"/>
		<input type="button" context="profile" name="next" value="Next"/>
		<br/>
		<input type="button" context="profile" name="showSelected" value="Show Selected"/>
		<input type="button" context="profile" name="showSelectedList" value="Show Selected List"/>
		<br/>
		<br/>

		ID: <input type="text" context="profile" name="entry.id" /><br/>
		Firstname: <input type="text" context="profile" name="entry.firstname" /><br/>
		Lastname: <input type="text" context="profile" name="entry.lastname" /><br/>
		<input type="button" context="profile" name="addRecord" value="Add Item"/>
		
	</body>

</html>
